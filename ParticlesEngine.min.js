!function(a){return generateParticles=function(b){"use strict";var c=a.cancelAnimationFrame||a.clearTimeout,d=a.requestAnimationFrame||function(a){return setTimeout(a,1e3/60)},e=document.getElementById(b);if(null===e)return console.error("ParticlesEngine Error - Container is Null");var f=document.createElement("canvas");f.id="particles_"+b,f.style.display="block",f.style.position="absolute",e.innerHTML="",e.style.overflow="hidden",e.appendChild(f);var g,h,i,j,k,l,m=f.getContext("2d"),n=0,o=[],p=[],q=0,r={};r.events={},r.emit=function(a,b){!this.events[a]||this.events[a].length<1||this.events[a].forEach(function(a){a(b||{})})},r.subscribe=function(a,b){this.events[a]||(this.events[a]=[]),this.events[a].push(b)};var s=function(){"undefined"==typeof a.particleEngine?(a.particleEngine={},a.particleEngine.resizeHandler={}):"undefined"!=typeof a.particleEngine["animation"+b]&&(c(a.particleEngine["animation"+b]),a.removeEventListener("resize",a.particleEngine.resizeHandler["animation"+b],!1)),a.particleEngine.resizeHandler["animation"+b]=function(){t()},a.addEventListener("resize",a.particleEngine.resizeHandler["animation"+b],!1)},t=function(){f.width=e.clientWidth,f.height=e.clientHeight,g=Math.round(Math.sqrt(f.width*f.width+f.height*f.height)),h=Math.floor(f.width/2),i=Math.floor(f.height/2),o.length=0,p.length=0,q=0,r.emit("init"),G()},u=function(){var a={};return a.init=function(){var a=function(a){"gradient"===a?b():"image"===a&&c()},b=function(){var a,b="";for(var c in C.backgroundColors)"undefined"==typeof a&&(a=C.backgroundColors[c].color),C.backgroundColors.hasOwnProperty(c)&&(b+="radial-gradient(circle at "+C.backgroundColors[c].positionX+"% "+C.backgroundColors[c].positionY+"%, #"+C.backgroundColors[c].color+", transparent 100%),");b=b.slice(0,-1),e.style.background="#"+a,e.style.backgroundImage=b},c=function(){e.style.backgroundImage="url(img/wallpaper.jpg)",e.style.backgroundPosition="center center",e.style.backgroundSize="cover"},d=function(){null!==C.background&&a(C.background)};r.subscribe("init",d)},a}(),v=function(){var b={};return b.init=function(){var c=function(){};c.prototype.init=function(){this.name="emitter"+A.getRandomBetween(1,1e3),this.lifeTime=1},c.prototype.update=function(){this.lifeTime--,this.lifeTime<0&&this.destroy()},c.prototype.destroy=function(){for(var a=0;a<o.length;a++){var b=o[a];b.emitter==this.name&&b.destroy()}var c=p.indexOf(this);p.splice(c,1)};var d=function(a){this.init(),this.emitterPositions=[];var b=f.width/100*a.positionX+a.positionXpx,c=f.height/100*a.positionY+a.positionYpx;m.fillStyle="rgba(254,255,255,1)",m.font=a.emitterFontSize+"px Verdana",m.fillText(a.text,b,c);for(var d=m.getImageData(0,0,f.width,f.height),e=d.data,g=0,h=0,i=0;i<e.length;i+=4)g++,g==f.width&&(g=0,h++),254==e[i]&&this.emitterPositions.push([g,h]);this.createTextEmitterParticles(a)};d.prototype=c.prototype,d.prototype.createTextEmitterParticles=function(a){for(var b=0;b<a.particlesNumber;b++){if(this.emitterPositions.length<2)return;var c=A.getRandomBetween(1,this.emitterPositions.length-1),d=this.emitterPositions[c],e=new D.Particle(d[0],d[1],this.name);e.init(),this.emitterPositions.splice(c,1)}};var e=function(a){this.init();for(var b=0;b<a.particlesNumber;b++){var c=Math.floor(Math.random()*f.width+1),d=Math.floor(Math.random()*f.height+1),e=new D.Particle(c,d,this.name);e.init()}};e.prototype=c.prototype;var g=function(a,b){this.init();for(var c=0;c<a.particlesNumber;c++){var d=f.width/100*a.positionX+a.positionXpx,e=f.height/100*a.positionY+a.positionYpx,g=new D.Particle(d,e,this.name);g.init(b)}};g.prototype=c.prototype;var h=function(a,b,c){var f;"text"===a?f=new d(b,c):"point"===a?f=new g(b,c):"random"===a&&(f=new e(b,c)),p.push(f)};b.createScene=function(){"text"===C.emitterType?h("text",{positionX:C.emitterPositionX,positionY:C.emitterPositionY,particlesNumber:C.particlesNumber,text:C.emitterShape,emitterFontSize:C.emitterFontSize,positionXpx:C.emitterPositionXpx,positionYpx:C.emitterPositionYpx},C):"point"===C.emitterType?h("point",{positionX:C.emitterPositionX,positionY:C.emitterPositionY,positionXpx:C.emitterPositionXpx,positionYpx:C.emitterPositionYpx,particlesNumber:300},C):"random"===C.emitterType&&h("random",{particlesNumber:C.particlesNumber},C)},a.particleEngine.addEmitter=h},b}(),w=function(){var a={};return a.init=function(){D.Particle.prototype.fadeTo=function(a){this.opacity<a?(this.opacity=this.opacity+.01,this.opacity>1&&(this.opacity=1)):this.opacity>a&&(this.opacity=this.opacity-.01)},D.Particle.prototype.fadeIn=function(){this.active=!0,-1===this.actions.indexOf("fadeIn")&&this.actions.push("fadeIn"),this.fadeTo(this.initialOpacity),this.initialOpacity-this.opacity<=0&&this.actions.splice(this.actions.indexOf("fadeIn"),1)},D.Particle.prototype.fadeOut=function(){this.isFading=!0,-1===this.actions.indexOf("fadeOut")&&this.actions.push("fadeOut"),this.opacity<.05&&(this.opacity=0,this.isFading=!1,this.active=!1,this.actions.splice(this.actions.indexOf("fadeOut"),1)),this.fadeTo(0)}},a}(),x=function(){var a={};return a.init=function(){D.Particle.prototype.appendGlobalForces=function(a,b){this.positionX=this.positionX+a,this.positionX+this.size>f.width&&(this.positionX=f.width-this.size),this.positionX<0&&(this.positionX=0),this.positionY=this.positionY+b,this.positionY>f.height&&(this.positionY=f.height),this.positionY<0&&(this.positionY=0)}},a}(),y=function(){var a={};return a.init=function(){var a,b,c,d=0,e=0,g=function(){if(!a)return a=Date.now(),void(b=0);var g=((new Date).getTime()-a)/1e3;a=Date.now(),b=Math.floor(1/g),d+=b,e++,5===e&&(c=Math.floor(d/5),e=0,d=0),c&&(m.fillStyle="#fff",m.font="10px Verdana",m.fillText("FPS: "+b,10,f.height-70),m.fillText("Average FPS: "+c,10,f.height-60),m.fillText("Active particles: "+o.length,10,f.height-50),m.fillText("Active emitters: "+p.length,10,f.height-40),m.fillText("Connections between particles: "+n,10,f.height-30),n=0)};r.subscribe("requestStatistics",g)},a}(),z=function(){var a={};return a.init=function(){a.collectGarbage=function(){q=0;for(var a=o.length-1;a>=0;a--){var b=o[a];b.destroyIt!==!0||b.active||o.splice(a,1)}},r.subscribe("refreshScene",function(){q>100&&a.collectGarbage()})},a}(),A=function(){var a={};return a.init=function(){a.getRandomBetween=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},a.getRandomDecimalBetween=function(a,b){var b=100*b,a=100*a,c=this.getRandomBetween(a,b),d=c/100;return d},a.hitTest=function(a,b){return a.positionX<b.positionX+b.size&&a.positionX+b.size>b.positionX&&a.positionY<b.positionY+b.size&&a.positionY>b.positionY?!0:!1},a.getDistance=function(a,b){var c=Math.round(Math.abs(a.positionX-b.positionX)),d=Math.round(Math.abs(a.positionY-b.positionY));return Math.round(Math.sqrt(c*c+d*d))},a.getPosition=function(){}},a}(),B=function(){var a={};return a.init=function(){a.Interaction=function(){};var b=new a.Interaction,c=[];a.Interaction.prototype.grabElements=function(){c=[];for(var a=0;a<o.length;a++){var b=o[a],d=A.getDistance(this,b);d<C.mouseInteractionDistance&&c.push(o[a])}},a.Interaction.prototype.interact=function(){for(var a=0;a<c.length;a++){var b=c[a];C.drawMouseConnections&&d(this,b),"gravity"==C.mouseInteractionType?(b.vectorX=this.positionX,b.vectorY=this.positionY):"initial"==C.mouseInteractionType&&(b.vectorX=b.initialPositionX,b.vectorY=b.initialPositionY)}};var d=function(a,b){m.beginPath(),m.moveTo(a.positionX,a.positionY),m.lineTo(b.getCenterX(),b.getCenterY()),m.strokeStyle="rgba("+C.mouseConnectionColor.red+","+C.mouseConnectionColor.green+","+C.mouseConnectionColor.blue+","+C.mouseConnectionColor.alpha+")",m.stroke()};a.Interaction.prototype.updateAnimation=function(){this.positionX=j,this.positionY=k,this.grabElements(),this.interact()};var e=function(){b.updateAnimation()};C.mouseInteraction&&C.mouseInteractionDistance>0&&r.subscribe("refreshScene",e)},a}(),C={particleType:"square",particleText:"!",emitterShape:"M",emitterFontSize:150,emitterType:"point",emitterPositionX:50,emitterPositionY:50,emitterPositionXpx:0,emitterPositionYpx:0,particlesNumber:1,initialSize:3,randomSize:!0,minimumSize:1,maximumSize:3,moveLimit:300,durationMin:50,durationMax:200,lifeTimeMin:10,lifeTimeMax:10,globalForceX:3,globalForceY:-1,particleColor:{red:255,green:255,blue:255,alpha:1},randomOpacity:!0,particleMinimumOpacity:.1,particleMaximumOpacity:.9,drawConnections:!1,connectionColor:{red:255,green:255,blue:255,alpha:1},mouseInteraction:!1,mouseInteractionType:"gravity",drawMouseConnections:!1,mouseInteractionDistance:300,mouseConnectionColor:{red:255,green:255,blue:255,alpha:1},showStatistics:!0,background:"gradient",backgroundColors:{color1:{positionX:25,positionY:25,color:"FF9900"},color2:{positionX:60,positionY:60,color:"FFE066"}}},D=(function(){var a={};return a.init=function(){D.Particle.prototype.appendParallax=function(){}},a}(),function(){var a={};return a.init=function(){a.Particle=function(a,b,c){this.positionX=a,this.positionY=b,this.initialPositionX=a,this.initialPositionY=b,this.emitter=c},a.Particle.prototype.doActions=function(){for(var a=0;a<this.actions.length;a++){var b=this.actions[a];this[b]()}},a.Particle.prototype.destroy=function(){this.destroyIt=!0,q++},a.Particle.prototype.calculateNewPosition=function(a,b){var c,d=this.duration,e=function(a,b){return a>b?(c=(a-b)/d,a=b+c):(c=(b-a)/d,a=b-c),a};this.positionX=e(a,this.positionX),this.positionY=e(b,this.positionY),this.timer==this.duration?(this.calculateVector(),this.timer=0):this.timer++},a.Particle.prototype.updateColor=function(){this.color="rgba("+this.red+","+this.green+","+this.blue+","+this.opacity+")"},a.Particle.prototype.init=function(a){this.particleConfig=a,this.initOpacity(),this.initSize(),this.red=a.particleColor.red,this.green=a.particleColor.green,this.blue=a.particleColor.blue,this.color="rgba("+this.red+","+this.green+","+this.blue+","+this.opacity+")",this.duration=A.getRandomBetween(a.durationMin,a.durationMax),this.limit=a.moveLimit,this.timer=0,this.lifeTime=b(a.lifeTimeMin,a.lifeTimeMax),this.actions=[],this.calculateVector(),this.active=!0,this.closestDistance=g,o.push(this),this.index=o.indexOf(this)};var b=function(a,b){return"undefined"!=typeof a&&"undefined"!=typeof b?A.getRandomBetween(a,b):!1};a.Particle.prototype.initOpacity=function(){this.opacity=this.particleConfig.randomOpacity?A.getRandomDecimalBetween(this.particleConfig.particleMinimumOpacity,this.particleConfig.particleMaximumOpacity):this.particleConfig.particleColor.alpha,this.initialOpacity=this.opacity},a.Particle.prototype.initSize=function(){this.size=this.particleConfig.randomSize?A.getRandomBetween(this.particleConfig.minimumSize,this.particleConfig.maximumSize):this.particleConfig.initialSize},a.Particle.prototype.calculateVector=function(){for(var a,b={},c=this,d=function(){var d=c.positionX-c.limit,e=c.positionX+c.limit;e>f.width&&(e=f.width),0>d&&(d=0);var g=c.positionY-c.limit,h=c.positionY+c.limit;h>f.height&&(h=f.height),0>g&&(g=0),b.positionX=A.getRandomBetween(d,e),b.positionY=A.getRandomBetween(g,h),a=A.getDistance(c,b)};"undefined"==typeof a||a>this.limit;)d();this.vectorX=b.positionX,this.vectorY=b.positionY},a.Particle.prototype.getCenterX=function(){return"square"==this.particleConfig.particleType?h=this.positionX+.5*this.size:"circle"==this.particleConfig.particleType&&(h=this.positionX),h},a.Particle.prototype.getCenterY=function(){return"square"==this.particleConfig.particleType?i=this.positionY+.5*this.size:"circle"==this.particleConfig.particleType&&(i=this.positionY),i},a.Particle.prototype.testInteraction=function(){for(var a=this.index+1;a<o.length;a++){if(!this.active)return;var b=o[a],c=A.getDistance(this,b);c<this.closestDistance&&b.active===!0&&(this.closestDistance=c,this.closestElement=b),c<b.closestDistance&&(b.closestDistance=c,b.closestElement=this)}},a.Particle.prototype.drawLine=function(){m.beginPath(),m.moveTo(this.getCenterX(),this.getCenterY()),m.lineTo(this.closestElement.getCenterX(),this.closestElement.getCenterY()),m.strokeStyle="rgba("+C.connectionColor.red+","+C.connectionColor.green+","+C.connectionColor.blue+","+C.connectionColor.alpha+")",m.stroke(),n++},a.Particle.prototype.updateLifeTime=function(){this.lifeTime--,this.lifeTime<0&&this.fadeOut()},a.Particle.prototype.updateAnimation=function(){this.calculateNewPosition(this.vectorX,this.vectorY),this.appendGlobalForces(C.globalForceX,C.globalForceY),this.updateColor(),m.fillStyle=this.color,"square"==this.particleConfig.particleType?m.fillRect(this.positionX,this.positionY,this.size,this.size):"circle"==this.particleConfig.particleType?(m.beginPath(),m.arc(this.positionX,this.positionY,this.size,0,2*Math.PI),m.fill(),m.closePath()):"text"==this.particleConfig.particleType&&(m.font=this.size+"px Verdana",m.fillText(C.particleText,this.positionX,this.positionY))}},a}()),E=function(){var a={};return a.init=function(){var b=0;a.update=function(){if(b++,C.drawConnections&&3===b){b=0;for(var a=0;a<o.length;a++){var c=o[a];c.closestDistance=g,c.closestElement=null}for(var a=0;a<o.length;a++){var c=o[a];c.testInteraction()}}if(C.drawConnections)for(var a=0;a<o.length;a++){var c=o[a];c.closestElement&&c.drawLine()}for(var a=0;a<o.length;a++){var c=o[a];c.doActions(),c.active?(c.updateAnimation(),c.updateLifeTime()):c.destroyIt||c.active||c.isFading||(c.lifeTime=100,c.positionX=c.initialPositionX,c.positionY=c.initialPositionY,c.calculateVector(),c.timer=0,c.fadeIn())}for(var a=0;a<p.length;a++)p[a].update();r.emit("refreshScene")}},a}();s(),A.init(),z.init(),D.init(),B.init(),v.init(),E.init(),w.init(),x.init(),u.init(),y.init(),f.onmousemove=function(b){j=b.clientX-e.offsetLeft+a.pageXOffset,k=b.clientY-e.offsetTop+a.pageYOffset,particleEngine.mousePositionX=j,particleEngine.mousePositionY=k};var F=function(){m.clearRect(0,0,f.width,f.height)};a.getP=function(){console.log(o)};var G=function(){F(),E.update(),a.particleEngine["animation"+b]=d(G),l=!0,C.showStatistics&&r.emit("requestStatistics")};t()},a.generateParticles=generateParticles,generateParticles}(window);