!function(a){initParticleEngine=function(b){"use strict";var c=a.requestAnimationFrame||function(a){return setTimeout(a,1e3/60)},d=a.cancelAnimationFrame||a.clearTimeout,e=function(){d(a.particleEngine["animation"+b])},f=document.getElementById(b);if(null===f)return console.error("ParticlesEngine Error - Container is Null");var g=document.createElement("canvas");g.id="particles_"+b,g.style.display="block",g.style.position="absolute",f.innerHTML="",f.style.overflow="hidden",f.appendChild(g);var h,i=g.getContext("2d"),j={},k=0,l=[],m=[],n={};n.events={},n.emit=function(a,b){!this.events[a]||this.events[a].length<1||this.events[a].forEach(function(a){a(b||{})})},n.subscribe=function(a,b){this.events[a]||(this.events[a]=[]),this.events[a].push(b)};var o=function(){"undefined"==typeof a.particleEngine?(a.particleEngine=j,j.resizeHandler={}):"undefined"!=typeof j["animation"+b]&&(e(j["animation"+b]),a.removeEventListener("resize",j.resizeHandler["animation"+b],!1)),j.resizeHandler["animation"+b]=function(){e(j["animation"+b]),p()},a.addEventListener("resize",j.resizeHandler["animation"+b],!1)},p=function(){g.width=f.clientWidth,g.height=f.clientHeight,h=Math.round(Math.sqrt(g.width*g.width+g.height*g.height)),l.length=0,m.length=0,n.emit("init"),K()},q={};q.init=function(){var a=function(a){"gradient"===a&&b()},b=function(){var a,b="";for(var c in z.backgroundColors)"undefined"==typeof a&&(a=z.backgroundColors[c].color),z.backgroundColors.hasOwnProperty(c)&&(b+="radial-gradient(circle at "+z.backgroundColors[c].positionX+"% "+z.backgroundColors[c].positionY+"%, #"+z.backgroundColors[c].color+", transparent 100%),");b=b.slice(0,-1),f.style.background="#"+a,f.style.backgroundImage=b},c=function(){null!==z.background&&a(z.background)};return n.subscribe("init",c),q};var r={};r.init=function(){return r.getRandomBetween=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},r.getRandomDecimalBetween=function(a,b){b=100*b,a=100*a;var c=this.getRandomBetween(a,b),d=c/100;return d},r.hitTest=function(a,b){return a.positionX<b.positionX+b.size&&a.positionX+b.size>b.positionX&&a.positionY<b.positionY+b.size&&a.positionY>b.positionY?!0:!1},r.getDistance=function(a,b){var c=Math.round(Math.abs(a.positionX-b.positionX)),d=Math.round(Math.abs(a.positionY-b.positionY));return Math.round(Math.sqrt(c*c+d*d))},r};var s={};s.init=function(){var a=function(){};return a.prototype=new F,a.prototype.getCenterX=function(){return this.positionX},a.prototype.getCenterY=function(){return this.positionY},a.prototype.updateAnimation=function(){this.calculateNewPosition(this.vectorX,this.vectorY),this.updateColor(),i.fillStyle=this.color,i.beginPath(),i.arc(this.positionX,this.positionY,this.size,0,2*Math.PI),i.fill(),i.closePath()},a};var t={};t.init=function(){var a=function(){},b={positionX:0,positionY:0,positionXpx:0,positionYpx:0,particlesNumber:20,lifeTime:1},c=function(a){return"square"===a?new H:"circle"===a?new G:"text"===a?new I:new H};a.prototype.init=function(a){this.name="emitter"+m.length;for(var c in b)this[c]=a.hasOwnProperty(c)?a[c]:b[c]},a.prototype.update=function(){this.lifeTime&&this.lifeTime--,this.lifeTime<=0&&this.destroy()},a.prototype.destroy=function(){for(var a=0;a<l.length;a++){var b=l[a];b.emitter===this.name&&b.destroy()}var c=m.indexOf(this);m.splice(c,1)};var d=function(a,b){this.init(a);for(var d=0;d<this.particlesNumber;d++){b.positionX=Math.floor(Math.random()*g.width+1),b.positionY=Math.floor(Math.random()*g.height+1);var e=c(b.particleType);e.create(b,this.name)}};d.prototype=new a;var e=function(a,b){this.init(a),b.positionX=a.positionX,b.positionY=a.positionY;for(var d=0;d<this.particlesNumber;d++){var e=c(b.particleType);e.create(b,this.name)}};e.prototype=new a;var f=function(a,b,c){var f;"point"===a?f=new e(b,c):"random"===a&&(f=new d(b,c)),m.push(f)};return j.addEmitter=f,t};var u={};u.init=function(){return F.prototype.fadeTo=function(a){this.opacity<a?(this.opacity=this.opacity+.01,this.opacity>1&&(this.opacity=1)):this.opacity>a&&(this.opacity=this.opacity-.01)},F.prototype.fadeIn=function(){this.active=!0,-1===this.actions.indexOf("fadeIn")&&this.actions.push("fadeIn"),this.fadeTo(this.initialOpacity),this.initialOpacity-this.opacity<=0&&this.actions.splice(this.actions.indexOf("fadeIn"),1)},F.prototype.fadeOut=function(){this.isFading=!0,-1===this.actions.indexOf("fadeOut")&&this.actions.push("fadeOut"),this.opacity<.05&&(this.opacity=0,this.isFading=!1,this.active=!1,this.actions.splice(this.actions.indexOf("fadeOut"),1)),this.fadeTo(0)},u};var v={};v.init=function(){return F.prototype.appendGlobalForces=function(a,b){this.positionX=this.positionX+a,this.positionX+this.size>g.width&&(this.positionX=g.width-this.size),this.positionX<0&&(this.positionX=0),this.positionY=this.positionY+b,this.positionY>g.height&&(this.positionY=g.height),this.positionY<0&&(this.positionY=0)},v};var w={};w.init=function(){var a,b,c,d=0,e=0,f=function(){if(!a)return a=Date.now(),void(b=0);var f=((new Date).getTime()-a)/1e3;a=Date.now(),b=Math.floor(1/f),d+=b,e++,5===e&&(c=Math.floor(d/5),e=0,d=0),c&&(i.fillStyle="#fff",i.font="10px Verdana",i.fillText("FPS: "+b,10,g.height-70),i.fillText("Average FPS: "+c,10,g.height-60),i.fillText("Active particles: "+l.length,10,g.height-50),i.fillText("Active emitters: "+m.length,10,g.height-40),i.fillText("Connections between particles: "+k,10,g.height-30),k=0)};return n.subscribe("requestStatistics",f),w};var x={};x.init=function(){var a=0;return x.increase=function(){a++},x.collectGarbage=function(){for(var b=l.length-1;b>=0;b--){var c=l[b];c.destroyIt!==!0||c.active||l.splice(b,1)}a=0},n.subscribe("refreshScene",function(){a>100&&x.collectGarbage()}),x};var y={};y.init=function(){y.Interaction=function(){};var a=new y.Interaction,b=[];y.Interaction.prototype.grabElements=function(){b=[];for(var a=0;a<l.length;a++){var c=l[a],d=r.getDistance(this,c);d<z.mouseInteractionDistance&&b.push(l[a])}},y.Interaction.prototype.interact=function(){for(var a=0;a<b.length;a++){var d=b[a];z.drawMouseConnections&&c(this,d),"gravity"===z.mouseInteractionType?(d.vectorX=this.positionX,d.vectorY=this.positionY):"initial"===z.mouseInteractionType&&(d.vectorX=d.initialPositionX,d.vectorY=d.initialPositionY)}};var c=function(a,b){i.beginPath(),i.moveTo(a.positionX,a.positionY),i.lineTo(b.getCenterX(),b.getCenterY()),i.strokeStyle="rgba("+z.mouseConnectionColor.red+","+z.mouseConnectionColor.green+","+z.mouseConnectionColor.blue+","+z.mouseConnectionColor.alpha+")",i.stroke()};y.Interaction.prototype.updateAnimation=function(){this.positionX=j.mousePositionX,this.positionY=j.mousePositionY,this.grabElements(),this.interact()};var d=function(){a.updateAnimation()};return z.mouseInteraction&&z.mouseInteractionDistance>0&&n.subscribe("refreshScene",d),y};var z={globalForceX:5,globalForceY:-1,showStatistics:!0,background:"gradient",backgroundColors:{color1:{positionX:25,positionY:25,color:"FF9900"},color2:{positionX:60,positionY:60,color:"FFE066"}}},A={particleType:"square",particleText:"!",positionX:0,positionY:0,initialSize:3,randomSize:!0,minimumSize:1,maximumSize:3,moveLimit:300,durationMin:50,durationMax:200,lifeTimeMin:10,lifeTimeMax:10,red:255,green:255,blue:255,alpha:1,randomOpacity:!0,particleMinimumOpacity:.1,particleMaximumOpacity:.9,drawConnections:!1,connectionColor:{red:255,green:255,blue:255,alpha:1},mouseInteraction:!1,mouseInteractionType:"gravity",drawMouseConnections:!1,mouseInteractionDistance:300,mouseConnectionColor:{red:255,green:255,blue:255,alpha:1}},B={};B.init=function(){var a=function(a,b,c){var d;return a>b?(d=(a-b)/c,a=b+d):(d=(b-a)/c,a=b-d),a},b=function(a,b){return"undefined"!=typeof a&&"undefined"!=typeof b?r.getRandomBetween(a,b):!1},c=function(a){var b={},c=a.positionX-a.moveLimit,d=a.positionX+a.moveLimit;d>g.width&&(d=g.width),0>c&&(c=0);var e=a.positionY-a.moveLimit,f=a.positionY+a.moveLimit;return f>g.height&&(f=g.height),0>e&&(e=0),b.positionX=r.getRandomBetween(c,d),b.positionY=r.getRandomBetween(e,f),b},d=function(){};return d.prototype.doActions=function(){for(var a=0;a<this.actions.length;a++){var b=this.actions[a];this[b]()}},d.prototype.destroy=function(){this.destroyIt=!0,x.increase()},d.prototype.calculateNewPosition=function(b,c){this.positionX=a(b,this.positionX,this.duration),this.positionY=a(c,this.positionY,this.duration),this.timer===this.duration?(this.calculateVector(),this.timer=0):this.timer++},d.prototype.updateColor=function(){this.color="rgba("+this.red+","+this.green+","+this.blue+","+this.opacity+")"},d.prototype.create=function(a,b){this.emitter=b;for(var c in A)this[c]=a.hasOwnProperty(c)?a[c]:A[c];this.init()},d.prototype.init=function(){this.initOpacity(),this.initSize(),this.color="rgba("+this.red+","+this.green+","+this.blue+","+this.opacity+")",this.duration=r.getRandomBetween(this.durationMin,this.durationMax),this.timer=0,this.lifeTime=b(this.lifeTimeMin,this.lifeTimeMax),this.actions=[],this.calculateVector(),this.active=!0,this.closestDistance=h,l.push(this),this.index=l.indexOf(this)},d.prototype.initOpacity=function(){this.opacity=this.randomOpacity?r.getRandomDecimalBetween(this.particleMinimumOpacity,this.particleMaximumOpacity):this.particleColor.alpha,this.initialOpacity=this.opacity},d.prototype.initSize=function(){this.size=this.randomSize?r.getRandomBetween(this.minimumSize,this.maximumSize):this.initialSize},d.prototype.calculateVector=function(){for(var a,b={},d=this;"undefined"==typeof a||a>this.moveLimit;)b=c(d),a=r.getDistance(d,b);this.vectorX=b.positionX,this.vectorY=b.positionY},d.prototype.testInteraction=function(){for(var a=this.index+1;a<l.length;a++){if(!this.active)return;var b=l[a],c=r.getDistance(this,b);c<this.closestDistance&&b.active===!0&&(this.closestDistance=c,this.closestElement=b),c<b.closestDistance&&(b.closestDistance=c,b.closestElement=this)}},d.prototype.drawLine=function(){i.beginPath(),i.moveTo(this.getCenterX(),this.getCenterY()),i.lineTo(this.closestElement.getCenterX(),this.closestElement.getCenterY()),i.strokeStyle="rgba("+z.connectionColor.red+","+z.connectionColor.green+","+z.connectionColor.blue+","+z.connectionColor.alpha+")",i.stroke(),k++},d.prototype.updateLifeTime=function(){this.lifeTime&&this.lifeTime--,0===this.lifeTime&&this.fadeOut()},d};var C={};C.init=function(){var a=0,b=function(){if(z.drawConnections&&3===a){a=0;for(var b=0;b<l.length;b++){var c=l[b];c.closestDistance=h,c.closestElement=null}for(var b=0;b<l.length;b++){var c=l[b];c.testInteraction()}}if(z.drawConnections)for(var b=0;b<l.length;b++){var c=l[b];c.closestElement&&c.drawLine()}};return C.update=function(){a++,b();for(var c=0;c<l.length;c++){var d=l[c];d.doActions(),d.appendGlobalForces(z.globalForceX,z.globalForceY),d.active?(d.updateAnimation(),d.updateLifeTime()):d.destroyIt||d.active||d.isFading||(d.lifeTime=100,d.positionX=d.initialPositionX,d.positionY=d.initialPositionY,d.calculateVector(),d.timer=0,d.fadeIn())}for(var c=0;c<m.length;c++)m[c].update();n.emit("refreshScene")},C};var D={};D.init=function(){var a=function(){};return a.prototype=new F,a.prototype.getCenterX=function(){return this.positionX+.5*this.size},a.prototype.getCenterY=function(){return this.positionY+.5*this.size},a.prototype.updateAnimation=function(){this.calculateNewPosition(this.vectorX,this.vectorY),this.updateColor(),i.fillStyle=this.color,i.fillRect(this.positionX,this.positionY,this.size,this.size)},a};var E={};E.init=function(){var a=function(){};return a.prototype=new F,a.prototype.getCenterX=function(){return this.positionX+.5*this.size},a.prototype.getCenterY=function(){return this.positionY+.5*this.size},a.prototype.updateAnimation=function(){this.calculateNewPosition(this.vectorX,this.vectorY),this.updateColor(),i.font=this.size+"px Verdana",i.fillText(this.particleText,this.positionX,this.positionY)},a},o();var r=r.init(),x=x.init(),F=B.init(),G=s.init(),H=D.init(),I=E.init(),y=y.init(),t=t.init(),C=C.init(),u=u.init(),v=v.init(),q=q.init(),w=w.init();g.onmousemove=function(b){j.mousePositionX=b.clientX-f.offsetLeft+a.pageXOffset,j.mousePositionY=b.clientY-f.offsetTop+a.pageYOffset};var J=function(){i.clearRect(0,0,g.width,g.height)},K=function(){J(),C.update(),a.particleEngine["animation"+b]=c(K),z.showStatistics&&n.emit("requestStatistics")};p()},a.initParticleEngine=initParticleEngine}(window);